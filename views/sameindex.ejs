<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="../stylesheets/style.css">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.0.0/fonts/remixicon.css" rel="stylesheet">
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"> -->
  
</head>

<body>
  
  <div class="main">
    <div id="leftside">
      <i class="ri-file-copy-line" style="margin-top: 80px;"></i>    
      <i class="ri-search-line"></i>
      <i class="ri-stackshare-line"></i>
      <div>
        <i class="ri-user-line"></i>
        <i class="ri-settings-4-line"></i>
      </div>
     
    </div>
    <div class="left">
      <h5>Explorer </h5>
      <div id="header" style="border: 1px solid black; padding: 3px;">
        <h3 class="sasta"  >OPEN EDITORS</h3>
        <div>
          <i class="ri-file-add-line"></i>
          <i class="ri-folder-4-line"></i>
          <i class="ri-close-line"></i>
        </div>
        
      </div>
      <div class="nav">
        <div id="header">
          <h4>Folder Name</h4>
          <div class="icons">   
            <i id="fileicon" class="ri-file-line"></i>
            <i id="foldericon" class="ri-folder-line"></i>
          <a href="/"><i id="refreshicon" class="ri-loop-right-line"></i></a>
          </div>
        </div>
        <div id=""></div>
        <form id="filepop" class="popup" action="/create">
          <input type="text" placeholder="file" name="filename">
        </form>
        <form id="folderpop" class="popup" action="/createfolder">
          <input type="text" placeholder="folder" name="foldername" >
        </form>



        
          
            <% files.forEach(function(file){ %>
              <% if(file.folderhai===true){ %>
                <div class="files">
                <h4 class="hov"> <i class="ri-folder-line"></i><%=file.name%></h4>
                <div class="pencilcon">
                  <a href="/delete/<%=file.name%>"><i class="ri-delete-bin-6-line"></i></a>
                  <i class="ri-pencil-line"></i>
                </div>
              </div>
             <%  }else{%>
              <div class="files">
               <a href="/file/<%=file.name%>"> <h4 class="hov"> <i class="ri-file-line"></i><%=file.name%></h4> </a>
                <div class="pencilcon">
                  <a href="/delete/<%=file.name%>"><i class="ri-delete-bin-6-line"></i></a>
                  <i class="ri-pencil-line"></i>
                </div>
              </div>
             <%} %>
       <% }) %>
        


       <!-- <div class="folders">
        <p class="ov"><i class="ri-folder-fill"></i> some folder</p>
        <div class="pencilcon">
          <i class="ri-delete-bin-6-line"></i>
          <i class="ri-pencil-line"></i>
        </div>
       </div> -->
      </div>
    </div>
    <div class="right">
      <div id="nav">
        <div class="opened"><%=filename%> 
          <i class="ri-close-line"></i>
         </div>
        
      </div>
      

      <form action="/savefile/<%=filename%>" method="post">
        <textarea name="fileData"><%=Data%> </textarea>
        <button type="submit">Save</button>
      </form>
       
      <!-- <textarea><%=Data%></textarea> -->
    </div>
  </div>


  <script>

    function chaluband(){
      document.querySelectorAll("form").forEach(function(elem){
        elem.style.display="none"
      })
    }

    document.querySelector("#fileicon").addEventListener("click",function(){
      chaluband();

      document.querySelector("#filepop").style.display="initial"
    })

    document.querySelector("#foldericon").addEventListener("click",function(){
      chaluband();
      document.querySelector("#folderpop").style.display="initial"
    })

    window.addEventListener("keydown",function(event){
      // console.log(event)
      if(event.keyCode ===27){
        document.querySelectorAll("input").forEach(function(blank){
          chaluband();
          blank.value=""
        })
      }
    })


  </script>
</body>



<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script> -->
</html>